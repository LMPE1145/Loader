-- è§„åˆ™å˜é‡æ£€æŸ¥
if RULER ~= "YES" then
    -- åˆ›å»ºç•Œé¢
    local RuleUI = Instance.new("ScreenGui")
    RuleUI.Name = "LMPERuleUI"
    RuleUI.Parent = game.CoreGui
    RuleUI.ResetOnSpawn = false
    
    -- ä¸»çª—å£
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 350, 0, 300)
    MainFrame.Position = UDim2.new(0.5, -175, 0.5, -150)
    MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
    MainFrame.BorderSizePixel = 1
    MainFrame.BorderColor3 = Color3.fromRGB(60, 60, 75)
    MainFrame.Parent = RuleUI
    
    -- æ ‡é¢˜æ 
    local TitleBar = Instance.new("Frame")
    TitleBar.Name = "TitleBar"
    TitleBar.Size = UDim2.new(1, 0, 0, 40)
    TitleBar.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    TitleBar.BorderSizePixel = 0
    TitleBar.Parent = MainFrame
    
    local Title = Instance.new("TextLabel")
    Title.Name = "Title"
    Title.Size = UDim2.new(0.7, 0, 1, 0)
    Title.Position = UDim2.new(0, 10, 0, 0)
    Title.BackgroundTransparency = 1
    Title.Text = "ğŸ“‹ä½¿ç”¨åè®®"
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.TextSize = 16
    Title.Font = Enum.Font.GothamBold
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = TitleBar
    
    -- è§„åˆ™å†…å®¹ (ç®€æ´ç‰ˆ)
    local RuleText = Instance.new("TextLabel")
    RuleText.Name = "RuleText"
    RuleText.Size = UDim2.new(1, -20, 0, 130)
    RuleText.Position = UDim2.new(0, 10, 0, 50)
    RuleText.BackgroundTransparency = 1
    RuleText.Text = [[åœ¨ä½¿ç”¨æœ¬è„šæœ¬å‰ï¼Œè¯·ç¡®è®¤ï¼š

â€¢ ä»…ç”¨äºå­¦ä¹ ç ”ç©¶ç›®çš„
â€¢ éµå®ˆæ¸¸æˆè§„åˆ™
â€¢ ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…è´£ä»»
â€¢ ä½¿ç”¨å³è¡¨ç¤ºåŒæ„

è¯·å‹¾é€‰ä¸‹æ–¹åŒæ„æ¡†]]
    RuleText.TextColor3 = Color3.fromRGB(200, 200, 220)
    RuleText.TextSize = 12
    RuleText.Font = Enum.Font.Gotham
    RuleText.TextXAlignment = Enum.TextXAlignment.Left
    RuleText.TextYAlignment = Enum.TextYAlignment.Top
    RuleText.TextWrapped = true
    RuleText.Parent = MainFrame
    
    -- åŒæ„åŒºåŸŸ
    local AgreementArea = Instance.new("Frame")
    AgreementArea.Name = "AgreementArea"
    AgreementArea.Size = UDim2.new(1, -20, 0, 25)
    AgreementArea.Position = UDim2.new(0, 10, 0, 190)
    AgreementArea.BackgroundTransparency = 1
    AgreementArea.BorderSizePixel = 0
    AgreementArea.Parent = MainFrame
    
    -- ç®€çº¦å¤é€‰æ¡†
    local Checkbox = Instance.new("TextButton")
    Checkbox.Name = "Checkbox"
    Checkbox.Size = UDim2.new(0, 20, 0, 20)
    Checkbox.Position = UDim2.new(0, 0, 0, 2)
    Checkbox.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
    Checkbox.BorderSizePixel = 1
    Checkbox.BorderColor3 = Color3.fromRGB(80, 80, 95)
    Checkbox.Text = ""
    Checkbox.AutoButtonColor = false
    Checkbox.Parent = AgreementArea
    
    local Checkmark = Instance.new("TextLabel")
    Checkmark.Name = "Checkmark"
    Checkmark.Size = UDim2.new(1, 0, 1, 0)
    Checkmark.BackgroundTransparency = 1
    Checkmark.Text = "âœ“"
    Checkmark.TextColor3 = Color3.fromRGB(0, 255, 127)
    Checkmark.TextSize = 14
    Checkmark.Font = Enum.Font.GothamBold
    Checkmark.Visible = false
    Checkmark.Parent = Checkbox
    
    local AgreementLabel = Instance.new("TextLabel")
    AgreementLabel.Name = "AgreementLabel"
    AgreementLabel.Size = UDim2.new(1, -30, 1, 0)
    AgreementLabel.Position = UDim2.new(0, 25, 0, 0)
    AgreementLabel.BackgroundTransparency = 1
    AgreementLabel.Text = "æˆ‘å·²é˜…è¯»å¹¶åŒæ„ä»¥ä¸Šåè®®"
    AgreementLabel.TextColor3 = Color3.fromRGB(180, 180, 200)
    AgreementLabel.TextSize = 12
    AgreementLabel.Font = Enum.Font.Gotham
    AgreementLabel.TextXAlignment = Enum.TextXAlignment.Left
    AgreementLabel.Parent = AgreementArea
    
    -- æŒ‰é’®åŒºåŸŸ
    local ButtonArea = Instance.new("Frame")
    ButtonArea.Name = "ButtonArea"
    ButtonArea.Size = UDim2.new(1, -20, 0, 40)
    ButtonArea.Position = UDim2.new(0, 10, 1, -50)
    ButtonArea.BackgroundTransparency = 1
    ButtonArea.BorderSizePixel = 0
    ButtonArea.Parent = MainFrame
    
    -- æ‹’ç»æŒ‰é’®
    local DeclineBtn = Instance.new("TextButton")
    DeclineBtn.Name = "DeclineBtn"
    DeclineBtn.Size = UDim2.new(0, 100, 0, 35)
    DeclineBtn.Position = UDim2.new(0, 0, 0, 0)
    DeclineBtn.BackgroundColor3 = Color3.fromRGB(244, 67, 54)
    DeclineBtn.Text = "æ‹’ç»"
    DeclineBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    DeclineBtn.TextSize = 13
    DeclineBtn.Font = Enum.Font.GothamBold
    DeclineBtn.AutoButtonColor = false
    DeclineBtn.Parent = ButtonArea
    
    -- åŒæ„æŒ‰é’® (åˆå§‹ç¦ç”¨)
    local AcceptBtn = Instance.new("TextButton")
    AcceptBtn.Name = "AcceptBtn"
    AcceptBtn.Size = UDim2.new(0, 100, 0, 35)
    AcceptBtn.Position = UDim2.new(1, -100, 0, 0)
    AcceptBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
    AcceptBtn.Text = "åŒæ„"
    AcceptBtn.TextColor3 = Color3.fromRGB(120, 120, 140)
    AcceptBtn.TextSize = 13
    AcceptBtn.Font = Enum.Font.GothamBold
    AcceptBtn.AutoButtonColor = false
    AcceptBtn.Active = false
    AcceptBtn.Parent = ButtonArea
    
    -- å¤é€‰æ¡†äº¤äº’
    local isAgreed = false
    
    Checkbox.MouseButton1Click:Connect(function()
        isAgreed = not isAgreed
        Checkmark.Visible = isAgreed
        
        if isAgreed then
            Checkbox.BackgroundColor3 = Color3.fromRGB(44, 120, 224)
            Checkbox.BorderColor3 = Color3.fromRGB(44, 120, 224)
            
            -- å¯ç”¨åŒæ„æŒ‰é’®
            AcceptBtn.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
            AcceptBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
            AcceptBtn.Active = true
        else
            Checkbox.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
            Checkbox.BorderColor3 = Color3.fromRGB(80, 80, 95)
            
            -- ç¦ç”¨åŒæ„æŒ‰é’®
            AcceptBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
            AcceptBtn.TextColor3 = Color3.fromRGB(120, 120, 140)
            AcceptBtn.Active = false
        end
    end)
    
    -- æŒ‰é’®ç‚¹å‡»æ•ˆæœ
    local function setupButtonClick(button, callback)
        button.MouseButton1Down:Connect(function()
            if button.Active then
                button.BackgroundTransparency = 0.5
            end
        end)
        
        button.MouseButton1Up:Connect(function()
            if button.Active then
                button.BackgroundTransparency = 0
                if callback then
                    callback()
                end
            end
        end)
    end
    
    -- æ‹’ç»æŒ‰é’®ç‚¹å‡»
    setupButtonClick(DeclineBtn, function()
        RuleUI:Destroy()
        warn("âŒ æ‚¨å·²æ‹’ç»åè®®ï¼Œè„šæœ¬å°†ä¸ä¼šåŠ è½½")
    end)
    
    -- åŒæ„æŒ‰é’®ç‚¹å‡»
    setupButtonClick(AcceptBtn, function()
        if not isAgreed then return end
        
        -- è®¾ç½®è§„åˆ™å˜é‡
        RULER = "YES"
        
        -- å…³é—­ç•Œé¢
        RuleUI:Destroy()
        
        -- é‡æ–°æ£€æŸ¥è§„åˆ™å¹¶æ‰§è¡Œä¸»è„šæœ¬
        if RULER == "YES" then
            print("âœ… å·²åŒæ„åè®®ï¼Œæ­£åœ¨åŠ è½½ä¸»è„šæœ¬...")
            loadstring(game:HttpGet("https://raw.githubusercontent.com/LMPE1145/Loader/refs/heads/main/LMPEC.lua"))()
        end
    end)
    
    -- çª—å£æ‹–åŠ¨åŠŸèƒ½
    local dragging = false
    local dragStart
    local startPos
    
    TitleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(
                startPos.X.Scale, 
                startPos.X.Offset + delta.X,
                startPos.Y.Scale, 
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    -- åˆå§‹åŒ–åŠ¨ç”»
    MainFrame.Size = UDim2.new(0, 0, 0, 0)
    MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    
    game:GetService("TweenService"):Create(
        MainFrame,
        TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
        {Size = UDim2.new(0, 350, 0, 300), Position = UDim2.new(0.5, -175, 0.5, -150)}
    ):Play()
    
    -- é˜»æ­¢ç»§ç»­æ‰§è¡Œä¸»è„šæœ¬
    return
end

-- å¦‚æœRULERä¸º"YES"ï¼Œåˆ™æ­£å¸¸æ‰§è¡Œä¸»è„šæœ¬
print("âœ… åè®®æ£€æŸ¥é€šè¿‡ï¼Œæ­£åœ¨åŠ è½½ä¸»è„šæœ¬...")
loadstring(game:HttpGet("https://raw.githubusercontent.com/LMPE1145/Loader/refs/heads/main/LMPECENTRE.lua"))()